
<h1>Henshin - Bank Account Example</h1>

<p>
This example shows some basic concepts of the Henshin transformation
language and tool environment. The example transformation is <i>endogenous</i>,
meaning that it operates on a single metamodel. We explain how to define
transformation rules using Henshin's integrated graphical editor, and
how to use the Interpreter Wizard to execute rules on an example model.
</p>

<p>
The example files can be downloaded here: <a href="examples/bank/bank.zip">bank.zip</a>.
You can import the example project directly into your Eclipse workspace:
Go to <i>File &rarr; Import &rarr; General &rarr; Existing Projects into Workspace &rarr; Select archive file</i>
</p>

<h2>Metamodel and Instance Model</h2>

<p>
<a href="examples/bank/bank.png"><image src="examples/bank/bank.png" align="right" width="300" /></a>
The metamodel is defined in the file <i>bank.ecore</i>. We used 
the Ecore Tools to draw a diagram (depicted on the right). 
The diagram is stored in the file <i>bank.ecorediag</i>.
</p>

<p>
The class <i>Bank</i> serves as a root container for
all other classes. Every bank owns a number of accounts,
each with a unique ID and the current credit 
Two types of persons are distinguished: managers and clients.
Every client is associated with at most one manager and can
own a number of accounts in the bank. Note that the references
between <i>Account</i> and <i>Client</i>, and <i>Manager</i>
and <i>Client</i> are bidirectional. Therefore, it is for example
not only possible to obtain all accounts of a given client,
but also to find out to which client a given account belongs to.
</p>

<p>
<a href="examples/bank/example-bank.png"><image src="examples/bank/example-bank.png" align="right" width="300" /></a>
An example instance model is depicted on the right using
the Sample Reflective Ecore Model editor. It contains one
manager, three clients and four accounts. Note that
we did not generate code from the metamodel. Thus, we
use dynamic EMF here, i.e. the instance model is typed
over a dynamic metamodel loaded from <i>bank.ecore</i>.
This is also the reason why we used the generic file
extension <i>*.xmi</i> here and not, say, <i>*.bank</i>.
</p>

<h2>Transformation Rules</h2>

<p>
We define a couple of transformation rules for the above
metamodel. We use the integrated graphical editor of Henshin.
</p>

<p>
To set-up the transformation, go to 
<i>File &rarr; New &rarr; Other &rarr; Henshin &rarr; Henshin transformation Diagram</i>.
This wizard will create two files, one for storing the transformation
model and one for the diagram information 
(e.g. <i>bank.henshin</i> and <i>bank.henshin_diagram</i>).
When the wizard is finished, an empty diagram file is 
created and opened in the graphical editor.
Now you need to import the metamodel for which you want to define
a transformation. This can be done by right-clicking in the empty
editor and selecting <i>Import Package... &rarr; From Workspace</i>.
Then select the file <i>bank.ecore</i> and within this file the
package <i>bank</i>. If the import was successfull you will see all
classes of the metamodel appearing in the palette of the editor.
</p>

<p>
<a href="examples/bank/rule-create-account.png"><image src="examples/bank/rule-create-account.png" align="right" width="300" /></a>
To create a new transformation rule, use the <i>Rule</i> tool
in the palette. In the top of every rule, its name and parameters
are specified (and some optional information which we do not consider 
here). In our case, we write <i>createAccount(client, accountId)</i>,
where the <i>client</i> parameter is the name of the client for whom
an account should be created, and <i>accountId</i> is the ID to be used
for the new account.
</p>





